@{
    Layout = "_Layout";
}
@model Academy.Core.Models.BlogPost

<!-- Header Section -->
<section class="bg-gradient-to-r from-yellow-600 to-yellow-700 text-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="text-4xl md:text-5xl font-bold mb-4">
            –†–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Å—Ç–∞—Ç–∏—è
        </h1>
        <p class="text-xl text-yellow-100 max-w-3xl mx-auto">
            –û–±–Ω–æ–≤–µ—Ç–µ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ –Ω–∞ "@Model.Title"
        </p>
    </div>
</section>

<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="bg-white rounded-lg shadow-md p-8">
        <form asp-action="AdminEdit" method="post">
            <input type="hidden" asp-for="Id" />
            <input type="hidden" asp-for="CreatedAt" />
            <input type="hidden" asp-for="Slug" />
            
            <div asp-validation-summary="ModelOnly" class="mb-6 p-4 bg-red-50 border-l-4 border-red-400 text-red-700 rounded"></div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Main Content -->
                <div class="lg:col-span-2 space-y-6">
                    <!-- Title -->
                    <div>
                        <label asp-for="Title" class="block text-sm font-medium text-gray-700 mb-2">–ó–∞–≥–ª–∞–≤–∏–µ *</label>
                        <input asp-for="Title" type="text" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent"
                               placeholder="–í—ä–≤–µ–¥–µ—Ç–µ –∑–∞–≥–ª–∞–≤–∏–µ—Ç–æ –Ω–∞ —Å—Ç–∞—Ç–∏—è—Ç–∞">
                        <span asp-validation-for="Title" class="text-sm text-red-600"></span>
                    </div>

                    <!-- Summary -->
                    <div>
                        <label asp-for="Summary" class="block text-sm font-medium text-gray-700 mb-2">–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞–Ω–∏–µ *</label>
                        <textarea asp-for="Summary" rows="3" 
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent"
                                  placeholder="–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å—Ç–∞—Ç–∏—è—Ç–∞ (–º–∞–∫—Å–∏–º—É–º 500 —Å–∏–º–≤–æ–ª–∞)"></textarea>
                        <span asp-validation-for="Summary" class="text-sm text-red-600"></span>
                        <p class="text-xs text-gray-500 mt-1">–ú–∞–∫—Å–∏–º—É–º 500 —Å–∏–º–≤–æ–ª–∞</p>
                    </div>

                    <!-- Content -->
                    <div>
                        <label asp-for="Content" class="block text-sm font-medium text-gray-700 mb-2">–°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ *</label>
                        <div class="mb-2 p-3 bg-gray-50 rounded-lg border">
                            <div class="flex flex-wrap gap-2 mb-3">
                                <span class="text-sm font-medium text-gray-700">–ë—ä—Ä–∑–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏:</span>
                                <button type="button" onclick="insertTag('h1', 'H1 –ó–∞–≥–ª–∞–≤–∏–µ')" class="px-3 py-1 text-xs bg-blue-100 hover:bg-blue-200 rounded border text-blue-700">H1</button>
                                <button type="button" onclick="insertTag('h2', 'H2 –ü–æ–¥–∑–∞–≥–ª–∞–≤–∏–µ')" class="px-3 py-1 text-xs bg-blue-100 hover:bg-blue-200 rounded border text-blue-700">H2</button>
                                <button type="button" onclick="insertTag('h3', 'H3 –ü–æ–¥-–ø–æ–¥–∑–∞–≥–ª–∞–≤–∏–µ')" class="px-3 py-1 text-xs bg-blue-100 hover:bg-blue-200 rounded border text-blue-700">H3</button>
                                <button type="button" onclick="insertTag('p', '–ü–∞—Ä–∞–≥—Ä–∞—Ñ')" class="px-3 py-1 text-xs bg-green-100 hover:bg-green-200 rounded border text-green-700">P</button>
                                <button type="button" onclick="insertTag('ul', '–°–ø–∏—Å—ä–∫')" class="px-3 py-1 text-xs bg-purple-100 hover:bg-purple-200 rounded border text-purple-700">UL</button>
                                <button type="button" onclick="insertTag('strong', '–£–¥–µ–±–µ–ª–µ–Ω —Ç–µ–∫—Å—Ç')" class="px-3 py-1 text-xs bg-orange-100 hover:bg-orange-200 rounded border text-orange-700">B</button>
                                <button type="button" onclick="insertTag('em', '–ù–∞–∫–ª–æ–Ω–µ–Ω —Ç–µ–∫—Å—Ç')" class="px-3 py-1 text-xs bg-yellow-100 hover:bg-yellow-200 rounded border text-yellow-700">I</button>
                                <button type="button" onclick="insertTag('blockquote', '–¶–∏—Ç–∞—Ç')" class="px-3 py-1 text-xs bg-indigo-100 hover:bg-indigo-200 rounded border text-indigo-700">–¶–∏—Ç–∞—Ç</button>
                                <button type="button" onclick="showPreview()" class="px-3 py-1 text-xs bg-emerald-100 hover:bg-emerald-200 rounded border text-emerald-700">üëÅÔ∏è –ü—Ä–µ–≥–ª–µ–¥</button>
                            </div>
                            <p class="text-xs text-gray-600">–ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ –±—É—Ç–æ–Ω–∏—Ç–µ –≥–æ—Ä–µ –∑–∞ –±—ä—Ä–∑–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–Ω–æ –≤ –ø–æ–ª–µ—Ç–æ –ø–æ-–¥–æ–ª—É</p>
                        </div>
                        <textarea asp-for="Content" id="Content" rows="20" 
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent"
                                  placeholder="–í—ä–≤–µ–¥–µ—Ç–µ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ –Ω–∞ —Å—Ç–∞—Ç–∏—è—Ç–∞. –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ –±—É—Ç–æ–Ω–∏—Ç–µ –≥–æ—Ä–µ –∑–∞ –±—ä—Ä–∑–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ."></textarea>
                        <span asp-validation-for="Content" class="text-sm text-red-600"></span>
                        <p class="text-xs text-gray-500 mt-1">–°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ —Å–µ –∑–∞–ø–∞–∑–≤–∞ –∫–∞—Ç–æ HTML –∏ —Å–µ –ø–æ–∫–∞–∑–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–æ</p>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="space-y-6">
                    <!-- Category -->
                    <div>
                        <label asp-for="Category" class="block text-sm font-medium text-gray-700 mb-2">–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
                        <select asp-for="Category" 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent">
                            <option value="">–ò–∑–±–µ—Ä–µ—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è</option>
                            <option value="–û–±—É—á–µ–Ω–∏–µ">–û–±—É—á–µ–Ω–∏–µ</option>
                            <option value="–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</option>
                            <option value="–ü—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–Ω–µ">–ü—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–Ω–µ</option>
                            <option value="–ë–ï–õ">–ë—ä–ª–≥–∞—Ä—Å–∫–∏ –µ–∑–∏–∫</option>
                            <option value="–°—ä–≤–µ—Ç–∏">–°—ä–≤–µ—Ç–∏</option>
                            <option value="–ù–æ–≤–∏–Ω–∏">–ù–æ–≤–∏–Ω–∏</option>
                        </select>
                        <span asp-validation-for="Category" class="text-sm text-red-600"></span>
                    </div>

                    <!-- Author -->
                    <div>
                        <label asp-for="Author" class="block text-sm font-medium text-gray-700 mb-2">–ê–≤—Ç–æ—Ä</label>
                        <input asp-for="Author" type="text" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent"
                               placeholder="–í–∞—à–µ—Ç–æ –∏–º–µ">
                        <span asp-validation-for="Author" class="text-sm text-red-600"></span>
                    </div>

                    <!-- Slug -->
                    <div>
                        <label asp-for="Slug" class="block text-sm font-medium text-gray-700 mb-2">URL Slug</label>
                        <input asp-for="Slug" type="text" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent"
                               placeholder="url-slug-–Ω–∞-—Å—Ç–∞—Ç–∏—è—Ç–∞">
                        <span asp-validation-for="Slug" class="text-sm text-red-600"></span>
                        <p class="text-xs text-gray-500 mt-1">–í–Ω–∏–º–∞–Ω–∏–µ: –ø—Ä–æ–º—è–Ω–∞—Ç–∞ –Ω–∞ slug-–∞ –º–æ–∂–µ –¥–∞ –Ω–∞—Ä—É—à–∏ –≤—Ä—ä–∑–∫–∏—Ç–µ</p>
                    </div>

                    <!-- Image URL -->
                    <div>
                        <label asp-for="ImageUrl" class="block text-sm font-medium text-gray-700 mb-2">URL –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
                        <input asp-for="ImageUrl" type="url" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent"
                               placeholder="https://example.com/image.jpg">
                        <span asp-validation-for="ImageUrl" class="text-sm text-red-600"></span>
                    </div>

                    <!-- Is Published -->
                    <div>
                        <label class="flex items-center">
                            <input asp-for="IsPublished" type="checkbox" 
                                   class="h-4 w-4 text-yellow-600 focus:ring-yellow-500 border-gray-300 rounded">
                            <span class="ml-2 text-sm text-gray-700">–ü—É–±–ª–∏–∫—É–≤–∞–π –≤–µ–¥–Ω–∞–≥–∞</span>
                        </label>
                    </div>

                    <!-- SEO Section -->
                    <div class="border-t pt-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">SEO –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label asp-for="MetaTitle" class="block text-sm font-medium text-gray-700 mb-2">Meta –∑–∞–≥–ª–∞–≤–∏–µ</label>
                                <input asp-for="MetaTitle" type="text" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent"
                                       placeholder="SEO –∑–∞–≥–ª–∞–≤–∏–µ (–ø–æ-–¥–æ–±—Ä–µ –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–æ—Ç–æ)">
                                <span asp-validation-for="MetaTitle" class="text-sm text-red-600"></span>
                            </div>

                            <div>
                                <label asp-for="MetaDescription" class="block text-sm font-medium text-gray-700 mb-2">Meta –æ–ø–∏—Å–∞–Ω–∏–µ</label>
                                <textarea asp-for="MetaDescription" rows="2" 
                                          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent"
                                          placeholder="SEO –æ–ø–∏—Å–∞–Ω–∏–µ (–º–∞–∫—Å–∏–º—É–º 300 —Å–∏–º–≤–æ–ª–∞)"></textarea>
                                <span asp-validation-for="MetaDescription" class="text-sm text-red-600"></span>
                                <p class="text-xs text-gray-500 mt-1">–ú–∞–∫—Å–∏–º—É–º 300 —Å–∏–º–≤–æ–ª–∞</p>
                            </div>

                            <div>
                                <label asp-for="MetaKeywords" class="block text-sm font-medium text-gray-700 mb-2">Meta –∫–ª—é—á–æ–≤–∏ –¥—É–º–∏</label>
                                <input asp-for="MetaKeywords" type="text" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent"
                                       placeholder="–∫–ª—é—á–æ–≤–∞ –¥—É–º–∞ 1, –∫–ª—é—á–æ–≤–∞ –¥—É–º–∞ 2, –∫–ª—é—á–æ–≤–∞ –¥—É–º–∞ 3">
                                <span asp-validation-for="MetaKeywords" class="text-sm text-red-600"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Post Info -->
                    <div class="border-t pt-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ —Å—Ç–∞—Ç–∏—è—Ç–∞</h3>
                        
                        <div class="space-y-2 text-sm text-gray-600">
                            <div><strong>ID:</strong> @Model.Id</div>
                            <div><strong>–°—ä–∑–¥–∞–¥–µ–Ω–∞:</strong> @Model.CreatedAt.ToString("dd.MM.yyyy HH:mm")</div>
                            @if (Model.UpdatedAt.HasValue)
                            {
                                <div><strong>–û–±–Ω–æ–≤–µ–Ω–∞:</strong> @Model.UpdatedAt.Value.ToString("dd.MM.yyyy HH:mm")</div>
                            }
                            @if (Model.PublishedAt.HasValue)
                            {
                                <div><strong>–ü—É–±–ª–∏–∫—É–≤–∞–Ω–∞:</strong> @Model.PublishedAt.Value.ToString("dd.MM.yyyy HH:mm")</div>
                            }
                            <div><strong>–ü—Ä–µ–≥–ª–µ–¥–∏:</strong> @Model.ViewCount</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Submit Buttons -->
            <div class="mt-8 flex justify-end space-x-4">
                <a href="/blog/admin/list" 
                   class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
                    –û—Ç–∫–∞–∑
                </a>
                <button type="submit" 
                        class="px-6 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors">
                    –û–±–Ω–æ–≤–∏ —Å—Ç–∞—Ç–∏—è—Ç–∞
                </button>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        // Insert HTML tags with improved functionality
        function insertTag(tag, placeholder) {
            const editor = document.getElementById('Content');
            if (!editor) return;
            
            let insertText = '';
            if (tag === 'h1' || tag === 'h2' || tag === 'h3') {
                insertText = `<${tag}>${placeholder}</${tag}>`;
            } else if (tag === 'p') {
                insertText = `<p>${placeholder}</p>`;
            } else if (tag === 'ul') {
                insertText = `<ul>\n  <li>–ü—ä—Ä–≤–∏ –µ–ª–µ–º–µ–Ω—Ç</li>\n  <li>–í—Ç–æ—Ä–∏ –µ–ª–µ–º–µ–Ω—Ç</li>\n  <li>–¢—Ä–µ—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç</li>\n</ul>`;
            } else if (tag === 'strong') {
                insertText = `<strong>${placeholder}</strong>`;
            } else if (tag === 'em') {
                insertText = `<em>${placeholder}</em>`;
            } else if (tag === 'blockquote') {
                insertText = `<blockquote>\n  <p>${placeholder}</p>\n</blockquote>`;
            }
            
            editor.value += insertText;
        }

        function showPreview() {
            const content = document.getElementById('Content').value;
            let previewDiv = document.getElementById('previewContent');
            
            if (!previewDiv) {
                const contentDiv = document.getElementById('Content').closest('div');
                const newDiv = document.createElement('div');
                newDiv.id = 'previewContent';
                newDiv.className = 'mt-6 p-4 bg-gray-50 rounded-lg border';
                newDiv.innerHTML = '<h3 class="text-lg font-medium text-gray-900 mb-4">–ü—Ä–µ–≥–ª–µ–¥ –Ω–∞ —Å—Ç–∞—Ç–∏—è—Ç–∞</h3><div class="blog-content"></div>';
                contentDiv.appendChild(newDiv);
                previewDiv = newDiv;
            }
            
            const previewContent = previewDiv.querySelector('.blog-content');
            if (previewContent) {
                previewContent.innerHTML = content;
            }
        }
    </script>
}
