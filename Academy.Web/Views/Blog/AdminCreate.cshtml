@{
    Layout = "_Layout";
}
@model Academy.Core.Models.BlogPost

<!-- Header Section -->
<section class="bg-gradient-to-r from-blue-600 to-blue-700 text-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="text-4xl md:text-5xl font-bold mb-4">
            –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –Ω–æ–≤–∞ —Å—Ç–∞—Ç–∏—è
        </h1>
        <p class="text-xl text-blue-100 max-w-3xl mx-auto">
            –î–æ–±–∞–≤–µ—Ç–µ –Ω–æ–≤–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ –≤ –±–ª–æ–≥–∞ –Ω–∞ –ê–∫–∞–¥–µ–º–∏—è –õ–æ–≥–æ—Å
        </p>
    </div>
</section>

<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="bg-white rounded-lg shadow-md p-8">
        <form asp-action="AdminCreate" method="post">
            
            <div asp-validation-summary="ModelOnly" class="mb-6 p-4 bg-red-50 border-l-4 border-red-400 text-red-700 rounded"></div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Main Content -->
                <div class="lg:col-span-2 space-y-6">
                    <!-- Title -->
                    <div>
                        <label asp-for="Title" class="block text-sm font-medium text-gray-700 mb-2">–ó–∞–≥–ª–∞–≤–∏–µ *</label>
                        <input asp-for="Title" type="text" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                               placeholder="–í—ä–≤–µ–¥–µ—Ç–µ –∑–∞–≥–ª–∞–≤–∏–µ—Ç–æ –Ω–∞ —Å—Ç–∞—Ç–∏—è—Ç–∞">
                        <span asp-validation-for="Title" class="text-sm text-red-600"></span>
                    </div>

                    <!-- Summary -->
                    <div>
                        <label asp-for="Summary" class="block text-sm font-medium text-gray-700 mb-2">–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞–Ω–∏–µ *</label>
                        <textarea asp-for="Summary" rows="3" 
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                  placeholder="–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å—Ç–∞—Ç–∏—è—Ç–∞ (–º–∞–∫—Å–∏–º—É–º 500 —Å–∏–º–≤–æ–ª–∞)"></textarea>
                        <span asp-validation-for="Summary" class="text-sm text-red-600"></span>
                        <p class="text-xs text-gray-500 mt-1">–ú–∞–∫—Å–∏–º—É–º 500 —Å–∏–º–≤–æ–ª–∞</p>
                    </div>

                    <!-- Content -->
                    <div>
                        <label asp-for="Content" class="block text-sm font-medium text-gray-700 mb-2">–°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ *</label>
                        <div class="mb-2 p-3 bg-gray-50 rounded-lg border">
                            <div class="flex flex-wrap gap-2 mb-3">
                                <span class="text-sm font-medium text-gray-700">–ë—ä—Ä–∑–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏:</span>
                                <button type="button" onclick="insertTag('h1', 'H1 –ó–∞–≥–ª–∞–≤–∏–µ')" class="px-3 py-1 text-xs bg-blue-100 hover:bg-blue-200 rounded border text-blue-700">H1</button>
                                <button type="button" onclick="insertTag('h2', 'H2 –ü–æ–¥–∑–∞–≥–ª–∞–≤–∏–µ')" class="px-3 py-1 text-xs bg-blue-100 hover:bg-blue-200 rounded border text-blue-700">H2</button>
                                <button type="button" onclick="insertTag('h3', 'H3 –ü–æ–¥-–ø–æ–¥–∑–∞–≥–ª–∞–≤–∏–µ')" class="px-3 py-1 text-xs bg-blue-100 hover:bg-blue-200 rounded border text-blue-700">H3</button>
                                <button type="button" onclick="insertTag('p', '–ü–∞—Ä–∞–≥—Ä–∞—Ñ')" class="px-3 py-1 text-xs bg-green-100 hover:bg-green-200 rounded border text-green-700">P</button>
                                <button type="button" onclick="insertTag('ul', '–°–ø–∏—Å—ä–∫')" class="px-3 py-1 text-xs bg-purple-100 hover:bg-purple-200 rounded border text-purple-700">UL</button>
                                <button type="button" onclick="insertTag('strong', '–£–¥–µ–±–µ–ª–µ–Ω —Ç–µ–∫—Å—Ç')" class="px-3 py-1 text-xs bg-orange-100 hover:bg-orange-200 rounded border text-orange-700">B</button>
                                <button type="button" onclick="insertTag('em', '–ù–∞–∫–ª–æ–Ω–µ–Ω —Ç–µ–∫—Å—Ç')" class="px-3 py-1 text-xs bg-yellow-100 hover:bg-yellow-200 rounded border text-yellow-700">I</button>
                                <button type="button" onclick="insertTag('blockquote', '–¶–∏—Ç–∞—Ç')" class="px-3 py-1 text-xs bg-indigo-100 hover:bg-indigo-200 rounded border text-indigo-700">–¶–∏—Ç–∞—Ç</button>
                                <button type="button" onclick="showPreview()" class="px-3 py-1 text-xs bg-emerald-100 hover:bg-emerald-200 rounded border text-emerald-700">üëÅÔ∏è –ü—Ä–µ–≥–ª–µ–¥</button>
                            </div>
                            <p class="text-xs text-gray-600">–ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ –±—É—Ç–æ–Ω–∏—Ç–µ –≥–æ—Ä–µ –∑–∞ –±—ä—Ä–∑–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–Ω–æ –≤ –ø–æ–ª–µ—Ç–æ –ø–æ-–¥–æ–ª—É</p>
                        </div>
                        <textarea asp-for="Content" id="Content" rows="20" 
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                  placeholder="–í—ä–≤–µ–¥–µ—Ç–µ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ –Ω–∞ —Å—Ç–∞—Ç–∏—è—Ç–∞. –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ –±—É—Ç–æ–Ω–∏—Ç–µ –≥–æ—Ä–µ –∑–∞ –±—ä—Ä–∑–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ."></textarea>
                        <span asp-validation-for="Content" class="text-sm text-red-600"></span>
                        <p class="text-xs text-gray-500 mt-1">–°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ —Å–µ –∑–∞–ø–∞–∑–≤–∞ –∫–∞—Ç–æ HTML –∏ —Å–µ –ø–æ–∫–∞–∑–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–æ</p>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="space-y-6">
                    <!-- Category -->
                    <div>
                        <label asp-for="Category" class="block text-sm font-medium text-gray-700 mb-2">–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
                        <select asp-for="Category" 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">–ò–∑–±–µ—Ä–µ—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è</option>
                            <option value="–û–±—É—á–µ–Ω–∏–µ">–û–±—É—á–µ–Ω–∏–µ</option>
                            <option value="–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</option>
                            <option value="–ü—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–Ω–µ">–ü—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–Ω–µ</option>
                            <option value="–ë–ï–õ">–ë—ä–ª–≥–∞—Ä—Å–∫–∏ –µ–∑–∏–∫</option>
                            <option value="–°—ä–≤–µ—Ç–∏">–°—ä–≤–µ—Ç–∏</option>
                            <option value="–ù–æ–≤–∏–Ω–∏">–ù–æ–≤–∏–Ω–∏</option>
                        </select>
                        <span asp-validation-for="Category" class="text-sm text-red-600"></span>
                    </div>

                    <!-- Author -->
                    <div>
                        <label asp-for="Author" class="block text-sm font-medium text-gray-700 mb-2">–ê–≤—Ç–æ—Ä</label>
                        <input asp-for="Author" type="text" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                               placeholder="–í–∞—à–µ—Ç–æ –∏–º–µ" value="–ê–∫–∞–¥–µ–º–∏—è –õ–æ–≥–æ—Å">
                        <span asp-validation-for="Author" class="text-sm text-red-600"></span>
                    </div>

                    <!-- Slug -->
                    <div>
                        <label asp-for="Slug" class="block text-sm font-medium text-gray-700 mb-2">URL Slug</label>
                        <input asp-for="Slug" type="text" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                               placeholder="url-slug-–Ω–∞-—Å—Ç–∞—Ç–∏—è—Ç–∞">
                        <span asp-validation-for="Slug" class="text-sm text-red-600"></span>
                        <p class="text-xs text-gray-500 mt-1">–û—Å—Ç–∞–≤–µ—Ç–µ –ø—Ä–∞–∑–Ω–æ –∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ</p>
                    </div>

                    <!-- Image URL -->
                    <div>
                        <label asp-for="ImageUrl" class="block text-sm font-medium text-gray-700 mb-2">URL –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
                        <input asp-for="ImageUrl" type="url" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                               placeholder="https://example.com/image.jpg">
                        <span asp-validation-for="ImageUrl" class="text-sm text-red-600"></span>
                    </div>

                    <!-- Is Published -->
                    <div>
                        <label class="flex items-center">
                            <input asp-for="IsPublished" type="checkbox" 
                                   class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                            <span class="ml-2 text-sm text-gray-700">–ü—É–±–ª–∏–∫—É–≤–∞–π –≤–µ–¥–Ω–∞–≥–∞</span>
                        </label>
                    </div>

                    <!-- SEO Section -->
                    <div class="border-t pt-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">SEO –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label asp-for="MetaTitle" class="block text-sm font-medium text-gray-700 mb-2">Meta –∑–∞–≥–ª–∞–≤–∏–µ</label>
                                <input asp-for="MetaTitle" type="text" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       placeholder="SEO –∑–∞–≥–ª–∞–≤–∏–µ (–ø–æ-–¥–æ–±—Ä–µ –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–æ—Ç–æ)">
                                <span asp-validation-for="MetaTitle" class="text-sm text-red-600"></span>
                            </div>

                            <div>
                                <label asp-for="MetaDescription" class="block text-sm font-medium text-gray-700 mb-2">Meta –æ–ø–∏—Å–∞–Ω–∏–µ</label>
                                <textarea asp-for="MetaDescription" rows="2" 
                                          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                          placeholder="SEO –æ–ø–∏—Å–∞–Ω–∏–µ (–º–∞–∫—Å–∏–º—É–º 300 —Å–∏–º–≤–æ–ª–∞)"></textarea>
                                <span asp-validation-for="MetaDescription" class="text-sm text-red-600"></span>
                                <p class="text-xs text-gray-500 mt-1">–ú–∞–∫—Å–∏–º—É–º 300 —Å–∏–º–≤–æ–ª–∞</p>
                            </div>

                            <div>
                                <label asp-for="MetaKeywords" class="block text-sm font-medium text-gray-700 mb-2">Meta –∫–ª—é—á–æ–≤–∏ –¥—É–º–∏</label>
                                <input asp-for="MetaKeywords" type="text" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       placeholder="–∫–ª—é—á–æ–≤–∞ –¥—É–º–∞ 1, –∫–ª—é—á–æ–≤–∞ –¥—É–º–∞ 2, –∫–ª—é—á–æ–≤–∞ –¥—É–º–∞ 3">
                                <span asp-validation-for="MetaKeywords" class="text-sm text-red-600"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Submit Buttons -->
            <div class="mt-8 flex justify-end space-x-4">
                <a href="/blog/admin" 
                   class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
                    –û—Ç–∫–∞–∑
                </a>
                <button type="submit" 
                        class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    –°—ä–∑–¥–∞–π —Å—Ç–∞—Ç–∏—è
                </button>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        // Auto-generate slug from title
        document.getElementById('Title').addEventListener('input', function() {
            const title = this.value;
            const slugField = document.getElementById('Slug');
            
            if (slugField.value === '') {
                const slug = title.toLowerCase()
                    .replace(/[–∞-—è]/g, function(char) {
                        const map = {
                            '–∞': 'a', '–±': 'b', '–≤': 'v', '–≥': 'g', '–¥': 'd', '–µ': 'e',
                            '–∂': 'zh', '–∑': 'z', '–∏': 'i', '–π': 'y', '–∫': 'k', '–ª': 'l',
                            '–º': 'm', '–Ω': 'n', '–æ': 'o', '–ø': 'p', '—Ä': 'r', '—Å': 's',
                            '—Ç': 't', '—É': 'u', '—Ñ': 'f', '—Ö': 'h', '—Ü': 'ts', '—á': 'ch',
                            '—à': 'sh', '—â': 'sht', '—ä': 'a', '—å': 'y', '—é': 'yu', '—è': 'ya'
                        };
                        return map[char] || char;
                    })
                    .replace(/[^a-z0-9\s-]/g, '')
                    .replace(/\s+/g, '-')
                    .replace(/-+/g, '-')
                    .trim('-');
                
                slugField.value = slug;
            }
        });

        // Insert HTML tags
        function insertTag(tag, placeholder) {
            const contentField = document.getElementById('Content');
            const start = contentField.selectionStart;
            const end = contentField.selectionEnd;
            const text = contentField.value;
            
            let insertText = '';
            if (tag === 'h1' || tag === 'h2' || tag === 'h3') {
                insertText = `\n<${tag}>${placeholder}</${tag}>\n`;
            } else if (tag === 'p') {
                insertText = `\n<p>${placeholder}</p>\n`;
            } else if (tag === 'ul') {
                insertText = `\n<ul>\n  <li>–ü—ä—Ä–≤–∏ –µ–ª–µ–º–µ–Ω—Ç</li>\n  <li>–í—Ç–æ—Ä–∏ –µ–ª–µ–º–µ–Ω—Ç</li>\n</ul>\n`;
            } else if (tag === 'strong') {
                insertText = `<strong>${placeholder}</strong>`;
            } else if (tag === 'em') {
                insertText = `<em>${placeholder}</em>`;
            } else if (tag === 'blockquote') {
                insertText = `\n<blockquote>\n  <p>${placeholder}</p>\n</blockquote>\n`;
            }
            
            contentField.value = text.substring(0, start) + insertText + text.substring(end);
            contentField.focus();
            contentField.setSelectionRange(start + insertText.length, start + insertText.length);
        }

        // Show preview function
        function showPreview() {
            const content = document.getElementById('Content').value;
            let previewDiv = document.getElementById('previewContent');
            
            if (!previewDiv) {
                const contentDiv = document.getElementById('Content').closest('div');
                const newDiv = document.createElement('div');
                newDiv.id = 'previewContent';
                newDiv.className = 'mt-6 p-4 bg-gray-50 rounded-lg border';
                newDiv.innerHTML = '<h3 class="text-lg font-medium text-gray-900 mb-4">–ü—Ä–µ–≥–ª–µ–¥ –Ω–∞ —Å—Ç–∞—Ç–∏—è—Ç–∞</h3><div class="blog-content"></div>';
                contentDiv.appendChild(newDiv);
                previewDiv = newDiv;
            }
            
            const previewContent = previewDiv.querySelector('.blog-content');
            if (previewContent) {
                previewContent.innerHTML = content;
            }
        }

        // Set category from URL parameter if present
        window.addEventListener('load', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const category = urlParams.get('category');
            if (category) {
                document.getElementById('Category').value = category;
            }
        });
    </script>
}
